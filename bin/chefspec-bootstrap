#!/usr/bin/env ruby

require 'chefspec-bootstrap'
require 'optparse'

options = {:template => nil}

optparse = OptionParser.new do |opts|
  opts.banner = "Usage: chefspec-bootstrap <recipe.rb> [options]"
  opts.on('-t', '--template TEMPLATEFILE', "ERB template file used to generate specs") do |t|
    options[:template] = t
  end
end

abort "Recipe not specified!" if ARGV.empty?

optparse.parse!

recipe = ARGV[0]
bootstrap = ChefSpec::Bootstrap.new(recipe, options[:template])
bootstrap.generate
